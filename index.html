<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[꿈두레] 로봇 소프트웨어 개발반 특기사항 조회</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl overflow-hidden">
        <!-- Header -->
        <div class="bg-indigo-600 p-6 text-center text-white">
            <!-- ▼▼▼▼▼ [여기서 제목을 수정하세요] ▼▼▼▼▼ -->
            <h1 class="text-2xl font-bold mb-2"><i class="fas fa-book-reader mr-2"></i>[로봇 소프트웨어 개발] 특기사항 조회</h1>
            <!-- ▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲▲ -->
            
            <p class="text-indigo-100 text-sm">이름과 전화번호를 입력하여 내용을 확인하세요.</p>
        </div>

        <!-- Input Form -->
        <div class="p-8 space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">이름</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-user text-gray-400"></i>
                        </div>
                        <input type="text" id="name" 
                            class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors" 
                            placeholder="이름 (예: 홍길동)">
                    </div>
                </div>

                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">전화번호 (8자리)</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-phone text-gray-400"></i>
                        </div>
                        <input type="text" id="phone" maxlength="8"
                            class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors" 
                            placeholder="예: 12345678"
                            oninput="this.value = this.value.replace(/[^0-9]/g, '')">
                    </div>
                </div>
            </div>

            <button onclick="checkReview()" 
                class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200 ease-in-out transform hover:scale-[1.01] shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                내용 확인하기
            </button>
        </div>

        <!-- Result Area (Hidden initially) -->
        <div id="resultArea" class="hidden bg-gray-50 p-8 border-t border-gray-100 fade-in">
            <!-- Success Content -->
            <div id="successContent" class="hidden">
                <div class="text-center mb-6">
                    <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-green-100 text-green-500 mb-3">
                        <i class="fas fa-check text-xl"></i>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800"><span id="resultName" class="text-indigo-600"></span> 특기사항</h2>
                </div>
                
                <!-- Review Box -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm p-6 relative">
                    <i class="fas fa-quote-left text-4xl text-gray-100 absolute top-4 left-4 -z-1"></i>
                    <div class="prose max-w-none">
                        <p id="reviewText" class="text-gray-700 leading-relaxed text-justify whitespace-pre-wrap"></p>
                    </div>
                </div>

                <!-- 문의사항 및 설문 입력 섹션 -->
                <div id="inquiryContainer" class="mt-8 pt-6 border-t border-gray-200 text-left">
                    <h3 class="text-lg font-bold text-gray-800 mb-2"><i class="fas fa-poll-h text-indigo-500 mr-2"></i>설문조사</h3>
                    <p class="text-sm text-gray-600 mb-4">아래 설문에 참여해 주세요.</p>
                    
                    <!-- 화면 전환 방지용 숨겨진 iframe -->
                    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
                    
                    <!-- 실제 폼 -->
                    <form id="googleForm" action="" method="post" target="hidden_iframe" onsubmit="return validateForm()">
                        <!-- 학생 이름이 자동으로 들어갈 숨겨진 필드 -->
                        <input type="hidden" id="formNameField" name="" value="">
                        
                        <!-- 질문 1 -->
                        <div class="mb-4">
                            <label class="block text-sm font-bold text-gray-700 mb-1">1. 추가(또는 수정)하기를 바라는 내용이 있다면?</label>
                            <input type="text" id="formQ1Field" name="" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50" 
                                placeholder=" ">
                        </div>

                        <!-- 질문 2 -->
                        <div class="mb-4">
                            <label class="block text-sm font-bold text-gray-700 mb-1">2. 제외하기를 바라는 내용은?</label>
                            <input type="text" id="formQ2Field" name="" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors bg-gray-50" 
                                placeholder=" ">
                        </div>

                        <!-- 질문 3 -->
                        <div class="mb-4">
                            <label class="block text-sm font-bold text-gray-700 mb-1">3. 반드시 들어가기를 바라는 내용은?</label>
                            <textarea id="formQ3Field" name="" rows="3" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none bg-gray-50" 
                                placeholder=" "></textarea>
                        </div>
                        
                        <button type="submit" 
                            class="w-full flex items-center justify-center bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-4 rounded-lg transition duration-200 shadow-sm">
                            <i class="fas fa-paper-plane mr-2"></i> 설문 제출하기
                        </button>
                    </form>

                    <!-- 전송 완료 메시지 -->
                    <div id="thankYouMsg" class="hidden text-center p-6 bg-green-50 rounded-lg border border-green-100">
                        <div class="text-green-500 text-3xl mb-2"><i class="fas fa-check-circle"></i></div>
                        <h4 class="text-lg font-bold text-gray-800">제출되었습니다!</h4>
                        <p class="text-sm text-gray-600">소중한 의견 감사합니다.</p>
                    </div>
                </div>
            </div>

            <!-- Error Content -->
            <div id="errorContent" class="hidden text-center py-4">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-red-100 text-red-500 mb-4">
                    <i class="fas fa-exclamation-triangle text-2xl"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-900 mb-1">조회 실패</h3>
                <p id="errorMessage" class="text-gray-600 text-sm">입력하신 정보와 일치하는 내용이 없습니다.</p>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // [필수] 구글 설문지 연결 설정 (꼭 확인해주세요!)
        // ==========================================
        
        // 1. 설문지 주소: 끝이 반드시 /formResponse로 끝나야 합니다.
        // 잘못된 예: .../viewform, .../edit
        // 잘된 예: https://docs.google.com/forms/d/e/1FAIpQLSd.../formResponse
        // 주소 변신 시키기: 복사한 주소 맨 뒤의 viewform?usp=sf_link 부분을 지우고, formResponse 라고 적어주세요.
        const formActionUrl = "https://docs.google.com/forms/d/e/1FAIpQLSe7cObJm75oYt_qwb6hNYJkWpIB-rvqs4TQbzb4jupnd0fnJQ/formResponse"; 

        // 2. 각 질문의 ID (entry.숫자)
        // 아래 숫자는 선생님이 찾아주신 대로 넣어두었습니다. 주소만 바꾸시면 됩니다!
        const nameEntryId = "entry.605893712"; 
        const q1EntryId   = "entry.343257485";
        const q2EntryId   = "entry.433033407";
        const q3EntryId   = "entry.13441856";


        // ==========================================
        // [학생 데이터]
        // ==========================================
        const database = [
            {
                name: "홍길동",
                phone: "12345678",
                review: "로봇 소프트웨어의 구조와 구성 요소를 이해하고 로봇 서비스 구현을 위한 체험 활동 및 로봇 개발 프로젝트 활동에 성실히 참여함. 풀스택 개발자라는 진로 목표와 연계하여 서비스 로봇을 주제로 선정하고 구조를 이해함."
            },
            {
                name: "김철수",
                phone: "87654321",
                review: "수업 태도가 매우 바르며, 매 시간 성실하게 참여하는 학생임. 특히 그룹 활동에서 조장의 역할을 맡아 조원들의 의견을 조율하고 이끄는 리더십을 보임."
            },
            {
                name: "이영희",
                phone: "11112222",
                review: "창의적인 아이디어가 돋보이는 학생임. 주어진 과제에 대해 남들과 다른 시각으로 접근하여 독창적인 해결책을 제시하는 경우가 많음."
            }
        ];

        // 폼 전송 상태 변수
        var submitted = false;

        // Iframe 로드 이벤트 리스너
        window.onload = function() {
            const iframe = document.getElementById('hidden_iframe');
            if(iframe) {
                iframe.onload = function() {
                    if (submitted) {
                        showSuccessMsg();
                    }
                };
            }
        };

        function validateForm() {
            if (!formActionUrl || formActionUrl === "" || !formActionUrl.includes("formResponse")) {
                alert("설정 오류: 설문지 주소가 올바르지 않습니다.\n주소가 'formResponse'로 끝나는지 확인해주세요!");
                return false;
            }
            submitted = true;
            return true;
        }

        function checkReview() {
            const nameInput = document.getElementById('name').value.trim();
            const phoneInput = document.getElementById('phone').value.trim();
            
            const resultArea = document.getElementById('resultArea');
            const successContent = document.getElementById('successContent');
            const errorContent = document.getElementById('errorContent');
            const reviewText = document.getElementById('reviewText');

            // 초기화
            resultArea.classList.add('hidden');
            successContent.classList.add('hidden');
            errorContent.classList.add('hidden');
            document.getElementById('thankYouMsg').classList.add('hidden');
            document.getElementById('googleForm').classList.remove('hidden');
            
            // 입력 필드 초기화
            document.getElementById('formQ1Field').value = '';
            document.getElementById('formQ2Field').value = '';
            document.getElementById('formQ3Field').value = '';
            
            submitted = false;
            
            // 유효성 검사
            if (!nameInput || !phoneInput) {
                showError("이름과 전화번호를 모두 입력해주세요.");
                return;
            }

            if (phoneInput.length !== 8) {
                showError("전화번호는 8자리 숫자여야 합니다.");
                return;
            }

            // 데이터 검색
            const student = database.find(item => item.name === nameInput && item.phone === phoneInput);

            // 잠시 로딩 효과
            setTimeout(() => {
                resultArea.classList.remove('hidden');
                
                if (student) {
                    // 조회 성공
                    document.getElementById('resultName').innerText = student.name;
                    document.getElementById('reviewText').innerText = student.review;
                    
                    // 폼 설정
                    setupForm(student.name);

                    successContent.classList.remove('hidden');
                } else {
                    // 조회 실패
                    showError("일치하는 학생 정보가 없습니다.<br>입력하신 정보를 다시 확인해주세요.");
                }
            }, 300);
        }

        function setupForm(studentName) {
            const form = document.getElementById('googleForm');
            const nameField = document.getElementById('formNameField');
            
            const q1Field = document.getElementById('formQ1Field');
            const q2Field = document.getElementById('formQ2Field');
            const q3Field = document.getElementById('formQ3Field');

            // 폼 속성 연결
            if (formActionUrl && formActionUrl !== "") {
                form.action = formActionUrl;
                
                nameField.name = nameEntryId;
                nameField.value = studentName; 
                
                q1Field.name = q1EntryId;
                q2Field.name = q2EntryId;
                q3Field.name = q3EntryId;
            } else {
                q3Field.placeholder = "⚠️ 선생님, 코드에서 formActionUrl 설정을 확인해주세요.";
            }
        }

        function showSuccessMsg() {
            document.getElementById('googleForm').classList.add('hidden');
            document.getElementById('thankYouMsg').classList.remove('hidden');
            document.getElementById('thankYouMsg').classList.add('fade-in');
        }

        function showError(message) {
            const resultArea = document.getElementById('resultArea');
            const errorContent = document.getElementById('errorContent');
            const errorMessage = document.getElementById('errorMessage');
            
            resultArea.classList.remove('hidden');
            errorContent.classList.remove('hidden');
            errorMessage.innerHTML = message;
        }

        // Enter 키 입력 시 조회 실행
        document.getElementById('phone').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkReview();
        });
        document.getElementById('name').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkReview();
        });
    </script>
</body>
</html>